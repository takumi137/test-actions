name: Launch Fargate Runner

on:
  workflow_job:
    types: [queued]

jobs:
  prepare:
    runs-on: ubuntu-latest  # Lambda起動のためGitHubのホストで動かす
    steps:
      - name: Trigger API Gateway
        run: |
          curl -X POST arn:aws:execute-api:ap-northeast-1:739275465823:nn8hundfq4/*/POST/webhook \
            -H "Content-Type: application/json" \
            -d "{\"workflow_job\": {\"runner_name\": \"fargate-runner\"}}"
